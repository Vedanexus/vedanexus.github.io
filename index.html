<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Game Base – Move + Shoot</title>

<style>
html,body{
  margin:0;
  padding:0;
  overflow:hidden;
}
body{
  background:url("bg.jpg") center/cover no-repeat fixed;
}
canvas{
  display:block;
}
</style>
</head>

<body>

<canvas id="game"></canvas>

<script>
/* CANVAS */
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

function resize(){
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
window.addEventListener("resize", resize);
resize();

/* IMAGES */
const heroImg = new Image();
heroImg.src = "hero.png";

const enemyImg = new Image();
enemyImg.src = "enemy.png";

/* PLAYER */
const player = {
  x: canvas.width/2 - 24,
  y: canvas.height - 90,
  w: 48,
  h: 48
};

/* STATE */
let bullets = [];
let enemies = [];
let dragging = false;

/* INPUT – MOVE + SHOOT */
document.addEventListener("pointerdown", e=>{
  dragging = true;
  player.x = e.clientX - player.w/2;

  // SHOOT
  bullets.push({
    x: player.x + player.w/2 - 3,
    y: player.y,
    w: 6,
    h: 12,
    v: 10
  });
});

document.addEventListener("pointermove", e=>{
  if(dragging){
    player.x = e.clientX - player.w/2;
  }
});

document.addEventListener("pointerup", ()=>{
  dragging = false;
});

/* SPAWN ENEMY */
setInterval(()=>{
  enemies.push({
    x: Math.random() * (canvas.width - 48),
    y: -50,
    w: 48,
    h: 48,
    v: 3
  });
}, 900);

/* COLLISION */
function hit(a,b){
  return a.x < b.x+b.w &&
         a.x+a.w > b.x &&
         a.y < b.y+b.h &&
         a.y+a.h > b.y;
}

/* LOOP */
function loop(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  /* PLAYER */
  if(heroImg.complete){
    ctx.drawImage(heroImg, player.x, player.y, player.w, player.h);
  }else{
    ctx.fillStyle="white";
    ctx.fillRect(player.x, player.y, player.w, player.h);
  }

  /* BULLETS */
  ctx.fillStyle="cyan";
  bullets.forEach(b=>{
    b.y -= b.v;
    ctx.fillRect(b.x, b.y, b.w, b.h);
  });

  /* ENEMIES */
  enemies.forEach(e=>{
    e.y += e.v;
    if(enemyImg.complete){
      ctx.drawImage(enemyImg, e.x, e.y, e.w, e.h);
    }else{
      ctx.fillStyle="red";
      ctx.fillRect(e.x, e.y, e.w, e.h);
    }
  });

  /* COLLISION */
  bullets.forEach((b,bi)=>{
    enemies.forEach((e,ei)=>{
      if(hit(b,e)){
        bullets.splice(bi,1);
        enemies.splice(ei,1);
      }
    });
  });

  bullets = bullets.filter(b=>b.y>-20);
  enemies = enemies.filter(e=>e.y<canvas.height+50);

  requestAnimationFrame(loop);
}
loop();
</script>

</body>
</html>
