<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Runner Boy</title>

<style>
html, body {
  margin: 0;
  padding: 0;
  overflow: hidden;
  background: linear-gradient(#7ec8ff, #e0f7ff);
  touch-action: none;
  font-family: system-ui, sans-serif;
}
canvas { display: block; }
</style>
</head>

<body>
<canvas id="game"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let W, H;
function resize(){
  W = canvas.width = window.innerWidth;
  H = canvas.height = window.innerHeight;
}
window.addEventListener("resize", resize);
resize();

/* ===== WORLD ===== */
const GRAVITY = 0.6;
const GROUND_Y = H - 80;

/* ===== HERO ===== */
const hero = {
  x: 50,
  y: GROUND_Y,
  w: 30,
  h: 40,
  vx: 0,
  vy: 0,
  onGround: false
};

/* ===== CAMERA ===== */
let camX = 0;

/* ===== PLATFORMS ===== */
const platforms = [
  {x:0, y:GROUND_Y, w:2000, h:80},
  {x:300, y:GROUND_Y-120, w:120, h:20},
  {x:600, y:GROUND_Y-180, w:120, h:20},
  {x:900, y:GROUND_Y-140, w:120, h:20},
  {x:1200, y:GROUND_Y-200, w:150, h:20}
];

/* ===== COINS ===== */
let coins = [
  {x:330, y:GROUND_Y-160, r:10},
  {x:630, y:GROUND_Y-220, r:10},
  {x:930, y:GROUND_Y-180, r:10},
  {x:1230, y:GROUND_Y-240, r:10}
];

/* ===== ENEMY ===== */
const enemy = {
  x:800,
  y:GROUND_Y-30,
  w:30,
  h:30,
  dir:1
};

let score = 0;
let gameOver = false;

/* ===== CONTROLS ===== */
let keys = {};
window.addEventListener("keydown", e => keys[e.key] = true);
window.addEventListener("keyup", e => keys[e.key] = false);

canvas.addEventListener("touchstart", () => {
  if(hero.onGround) hero.vy = -12;
});

/* ===== UPDATE ===== */
function update(){
  if(gameOver) return;

  // Move
  if(keys["ArrowRight"]) hero.vx = 4;
  else if(keys["ArrowLeft"]) hero.vx = -4;
  else hero.vx = 0;

  hero.x += hero.vx;
  hero.vy += GRAVITY;
  hero.y += hero.vy;

  hero.onGround = false;

  // Platform collision
  for(let p of platforms){
    if(hero.x < p.x+p.w &&
       hero.x+hero.w > p.x &&
       hero.y+hero.h < p.y+20 &&
       hero.y+hero.h+hero.vy >= p.y){
        hero.y = p.y-hero.h;
        hero.vy = 0;
        hero.onGround = true;
    }
  }

  // Camera follow
  camX = hero.x - 100;

  // Enemy
  enemy.x += enemy.dir * 1.5;
  if(enemy.x < 700 || enemy.x > 900) enemy.dir *= -1;

  // Enemy collision
  if(hero.x < enemy.x+enemy.w &&
     hero.x+hero.w > enemy.x &&
     hero.y < enemy.y+enemy.h &&
     hero.y+hero.h > enemy.y){
       gameOver = true;
  }

  // Coins
  coins = coins.filter(c => {
    const hit = Math.hypot(hero.x+hero.w/2-c.x, hero.y+hero.h/2-c.y) < 20;
    if(hit) score++;
    return !hit;
  });

  // Restart if fall
  if(hero.y > H) gameOver = true;
}

/* ===== DRAW ===== */
function draw(){
  ctx.clearRect(0,0,W,H);

  ctx.save();
  ctx.translate(-camX,0);

  // Platforms
  ctx.fillStyle="#654321";
  platforms.forEach(p => ctx.fillRect(p.x,p.y,p.w,p.h));

  // Coins
  ctx.fillStyle="gold";
  coins.forEach(c => {
    ctx.beginPath();
    ctx.arc(c.x,c.y,c.r,0,Math.PI*2);
    ctx.fill();
  });

  // Enemy
  ctx.fillStyle="red";
  ctx.fillRect(enemy.x,enemy.y,enemy.w,enemy.h);

  // Hero
  ctx.fillStyle="#0066ff";
  ctx.fillRect(hero.x,hero.y,hero.w,hero.h);

  ctx.restore();

  // UI
  ctx.fillStyle="#000";
  ctx.font="16px system-ui";
  ctx.fillText("Coins: "+score,10,20);

  if(gameOver){
    ctx.fillText("GAME OVER - TAP / REFRESH",W/2-90,H/2);
  }
}

/* ===== LOOP ===== */
function loop(){
  update();
  draw();
  requestAnimationFrame(loop);
}
loop();
</script>
</body>
</html>
